<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MaiLauncher è®¾ç½®ç»„ä»¶åº“æ¼”ç¤º</title>
    <!-- DaisyUI + Tailwind CSS -->
    <link href="https://cdn.jsdelivr.net/npm/daisyui@4.4.24/dist/full.min.css" rel="stylesheet" type="text/css" />
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Vue 3 -->
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <!-- Iconify -->
    <script src="https://code.iconify.design/3/3.1.1/iconify.min.js"></script>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        }
        .demo-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
        }
        .component-demo {
            background: hsl(var(--b1));
            border: 1px solid hsl(var(--b3));
            border-radius: 1rem;
            padding: 1.5rem;
            margin-bottom: 2rem;
        }
        .demo-title {
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: hsl(var(--bc));
        }
        .demo-description {
            color: hsl(var(--bc)/0.6);
            margin-bottom: 1.5rem;
        }
        .settings-value-display {
            background: hsl(var(--b2));
            border-radius: 0.5rem;
            padding: 1rem;
            margin-top: 1rem;
            font-family: monospace;
            font-size: 0.875rem;
        }
    </style>
</head>
<body>
    <div id="app">
        <div class="demo-container">
            <!-- é¡µé¢æ ‡é¢˜ -->
            <div class="text-center mb-8">
                <h1 class="text-4xl font-bold text-primary mb-2">MaiLauncher è®¾ç½®ç»„ä»¶åº“</h1>
                <p class="text-lg text-base-content/70">æ¨¡å—åŒ–ã€å“åº”å¼çš„è®¾ç½®ç•Œé¢ç»„ä»¶æ¼”ç¤º</p>
            </div>

            <!-- ä¸»é¢˜åˆ‡æ¢ -->
            <div class="component-demo">
                <h2 class="demo-title">ä¸»é¢˜é€‰æ‹©å™¨</h2>
                <p class="demo-description">æ¼”ç¤ºä¸»é¢˜åˆ‡æ¢åŠŸèƒ½ï¼Œæ”¯æŒæ˜äº®ã€æš—é»‘å’Œè·Ÿéšç³»ç»Ÿæ¨¡å¼</p>
                
                <div class="form-control">
                    <label class="label">
                        <span class="label-text">ä¸»é¢˜æ¨¡å¼</span>
                    </label>
                    <div class="flex gap-4">
                        <label v-for="theme in themes" :key="theme.value" class="label cursor-pointer">
                            <input 
                                type="radio" 
                                :value="theme.value" 
                                v-model="currentTheme" 
                                class="radio radio-primary" 
                                @change="changeTheme"
                            />
                            <iconify-icon :icon="theme.icon" class="ml-2"></iconify-icon>
                            <span class="label-text ml-1">{{ theme.label }}</span>
                        </label>
                    </div>
                </div>
            </div>

            <!-- åŸºç¡€è®¾ç½®ç»„ -->
            <div class="component-demo">
                <h2 class="demo-title">åŸºç¡€è®¾ç½®ç»„</h2>
                <p class="demo-description">å±•ç¤ºå¸¸ç”¨çš„è®¾ç½®æ§ä»¶ï¼šå¼€å…³ã€æ»‘å—ã€ä¸‹æ‹‰é€‰æ‹©å’Œè¾“å…¥æ¡†</p>
                
                <div class="space-y-6">
                    <!-- å¼€å…³æ§ä»¶ -->
                    <div class="form-control">
                        <label class="label cursor-pointer">
                            <div>
                                <span class="label-text">è‡ªåŠ¨å¯åŠ¨</span>
                                <div class="text-xs text-base-content/60">å¼€æœºæ—¶è‡ªåŠ¨å¯åŠ¨åº”ç”¨</div>
                            </div>
                            <input type="checkbox" v-model="settings.autoStart" class="toggle toggle-primary" />
                        </label>
                    </div>

                    <!-- æ»‘å—æ§ä»¶ -->
                    <div class="form-control">
                        <label class="label">
                            <span class="label-text">ç•Œé¢ç¼©æ”¾: {{ settings.zoom }}%</span>
                        </label>
                        <input 
                            type="range" 
                            min="75" 
                            max="150" 
                            step="5"
                            v-model="settings.zoom" 
                            class="range range-primary" 
                        />
                        <div class="w-full flex justify-between text-xs px-2">
                            <span>75%</span>
                            <span>100%</span>
                            <span>125%</span>
                            <span>150%</span>
                        </div>
                    </div>

                    <!-- ä¸‹æ‹‰é€‰æ‹© -->
                    <div class="form-control">
                        <label class="label">
                            <span class="label-text">ç•Œé¢è¯­è¨€</span>
                        </label>
                        <select v-model="settings.language" class="select select-bordered">
                            <option v-for="lang in languages" :key="lang.value" :value="lang.value">
                                {{ lang.flag }} {{ lang.label }}
                            </option>
                        </select>
                    </div>

                    <!-- è¾“å…¥æ¡† -->
                    <div class="form-control">
                        <label class="label">
                            <span class="label-text">æœåŠ¡ç«¯å£</span>
                        </label>
                        <div class="flex gap-2">
                            <input 
                                type="number" 
                                v-model="settings.port" 
                                min="1000" 
                                max="65535"
                                class="input input-bordered flex-1" 
                                placeholder="8080" 
                            />
                            <button 
                                class="btn btn-outline" 
                                @click="testConnection"
                                :class="{ 'loading': testing }"
                            >
                                <iconify-icon icon="mdi:connection" v-if="!testing"></iconify-icon>
                                æµ‹è¯•è¿æ¥
                            </button>
                        </div>
                        <div v-if="connectionStatus" class="label">
                            <span class="label-text-alt" :class="connectionStatus.success ? 'text-success' : 'text-error'">
                                <iconify-icon :icon="connectionStatus.success ? 'mdi:check-circle' : 'mdi:alert-circle'"></iconify-icon>
                                {{ connectionStatus.message }}
                            </span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- é«˜çº§åŠŸèƒ½æ¼”ç¤º -->
            <div class="component-demo">
                <h2 class="demo-title">é«˜çº§åŠŸèƒ½</h2>
                <p class="demo-description">å±•ç¤ºè·¯å¾„é€‰æ‹©ã€é…ç½®å¯¼å…¥å¯¼å‡ºç­‰é«˜çº§åŠŸèƒ½</p>
                
                <div class="space-y-6">
                    <!-- è·¯å¾„é€‰æ‹© -->
                    <div class="form-control">
                        <label class="label">
                            <span class="label-text">æ•°æ®ç›®å½•</span>
                        </label>
                        <div class="flex gap-2">
                            <input 
                                type="text" 
                                v-model="settings.dataPath" 
                                class="input input-bordered flex-1" 
                                placeholder="è¯·é€‰æ‹©æ•°æ®å­˜å‚¨ç›®å½•" 
                                readonly
                            />
                            <button class="btn btn-outline" @click="selectPath">
                                <iconify-icon icon="mdi:folder-open"></iconify-icon>
                                æµè§ˆ
                            </button>
                            <button class="btn btn-ghost" @click="settings.dataPath = ''" v-if="settings.dataPath">
                                <iconify-icon icon="mdi:close"></iconify-icon>
                            </button>
                        </div>
                    </div>

                    <!-- é…ç½®æ“ä½œ -->
                    <div class="form-control">
                        <label class="label">
                            <span class="label-text">é…ç½®ç®¡ç†</span>
                        </label>
                        <div class="flex gap-2">
                            <button class="btn btn-primary" @click="saveSettings">
                                <iconify-icon icon="mdi:content-save"></iconify-icon>
                                ä¿å­˜é…ç½®
                            </button>
                            <button class="btn btn-outline" @click="exportSettings">
                                <iconify-icon icon="mdi:export"></iconify-icon>
                                å¯¼å‡ºé…ç½®
                            </button>
                            <button class="btn btn-outline" @click="importSettings">
                                <iconify-icon icon="mdi:import"></iconify-icon>
                                å¯¼å…¥é…ç½®
                            </button>
                            <button class="btn btn-ghost" @click="resetSettings">
                                <iconify-icon icon="mdi:restore"></iconify-icon>
                                é‡ç½®
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- å½“å‰è®¾ç½®å€¼æ˜¾ç¤º -->
            <div class="component-demo">
                <h2 class="demo-title">å½“å‰è®¾ç½®å€¼</h2>
                <p class="demo-description">å®æ—¶æ˜¾ç¤ºå½“å‰æ‰€æœ‰è®¾ç½®çš„å€¼ï¼Œæ¼”ç¤ºæ•°æ®ç»‘å®šæ•ˆæœ</p>
                
                <div class="settings-value-display">
                    <pre>{{ JSON.stringify(settings, null, 2) }}</pre>
                </div>
            </div>
        </div>
    </div>

    <script>
        const { createApp, ref, reactive, watch } = Vue

        createApp({
            setup() {
                // ä¸»é¢˜é…ç½®
                const themes = [
                    { value: 'light', label: 'æ˜äº®', icon: 'mdi:white-balance-sunny' },
                    { value: 'dark', label: 'æš—é»‘', icon: 'mdi:weather-night' },
                    { value: 'auto', label: 'è·Ÿéšç³»ç»Ÿ', icon: 'mdi:theme-light-dark' }
                ]

                // è¯­è¨€é…ç½®
                const languages = [
                    { value: 'zh-CN', label: 'ç®€ä½“ä¸­æ–‡', flag: 'ğŸ‡¨ğŸ‡³' },
                    { value: 'en-US', label: 'English', flag: 'ğŸ‡ºğŸ‡¸' },
                    { value: 'ja-JP', label: 'æ—¥æœ¬èª', flag: 'ğŸ‡¯ğŸ‡µ' }
                ]

                // å½“å‰ä¸»é¢˜
                const currentTheme = ref('light')

                // è®¾ç½®æ•°æ®
                const settings = reactive({
                    autoStart: false,
                    zoom: 100,
                    language: 'zh-CN',
                    port: 8080,
                    dataPath: ''
                })

                // è¿æ¥æµ‹è¯•çŠ¶æ€
                const testing = ref(false)
                const connectionStatus = ref(null)

                // ä¸»é¢˜åˆ‡æ¢
                const changeTheme = () => {
                    document.documentElement.setAttribute('data-theme', currentTheme.value)
                }

                // æµ‹è¯•è¿æ¥
                const testConnection = async () => {
                    testing.value = true
                    connectionStatus.value = null
                    
                    setTimeout(() => {
                        testing.value = false
                        connectionStatus.value = {
                            success: Math.random() > 0.5,
                            message: Math.random() > 0.5 ? 'è¿æ¥æˆåŠŸ' : 'è¿æ¥å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç«¯å£è®¾ç½®'
                        }
                    }, 1500)
                }

                // é€‰æ‹©è·¯å¾„
                const selectPath = () => {
                    // æ¨¡æ‹Ÿè·¯å¾„é€‰æ‹©
                    settings.dataPath = `/Users/ç”¨æˆ·å/MaiLauncher/data_${Date.now()}`
                }

                // ä¿å­˜è®¾ç½®
                const saveSettings = () => {
                    localStorage.setItem('mailauncher-settings', JSON.stringify(settings))
                    alert('è®¾ç½®å·²ä¿å­˜ï¼')
                }

                // å¯¼å‡ºè®¾ç½®
                const exportSettings = () => {
                    const dataStr = JSON.stringify(settings, null, 2)
                    const dataBlob = new Blob([dataStr], { type: 'application/json' })
                    const url = URL.createObjectURL(dataBlob)
                    
                    const link = document.createElement('a')
                    link.href = url
                    link.download = 'mailauncher-settings.json'
                    link.click()
                    
                    URL.revokeObjectURL(url)
                }

                // å¯¼å…¥è®¾ç½®
                const importSettings = () => {
                    const input = document.createElement('input')
                    input.type = 'file'
                    input.accept = '.json'
                    input.onchange = (e) => {
                        const file = e.target.files[0]
                        if (file) {
                            const reader = new FileReader()
                            reader.onload = (e) => {
                                try {
                                    const imported = JSON.parse(e.target.result)
                                    Object.assign(settings, imported)
                                    alert('è®¾ç½®å¯¼å…¥æˆåŠŸï¼')
                                } catch (error) {
                                    alert('å¯¼å…¥å¤±è´¥ï¼šæ–‡ä»¶æ ¼å¼é”™è¯¯')
                                }
                            }
                            reader.readAsText(file)
                        }
                    }
                    input.click()
                }

                // é‡ç½®è®¾ç½®
                const resetSettings = () => {
                    if (confirm('ç¡®å®šè¦é‡ç½®æ‰€æœ‰è®¾ç½®å—ï¼Ÿ')) {
                        Object.assign(settings, {
                            autoStart: false,
                            zoom: 100,
                            language: 'zh-CN',
                            port: 8080,
                            dataPath: ''
                        })
                        currentTheme.value = 'light'
                        changeTheme()
                    }
                }

                // ç›‘å¬è®¾ç½®å˜åŒ–
                watch(settings, (newSettings) => {
                    console.log('è®¾ç½®å·²æ›´æ–°:', newSettings)
                }, { deep: true })

                // åˆå§‹åŒ–ä¸»é¢˜
                changeTheme()

                return {
                    themes,
                    languages,
                    currentTheme,
                    settings,
                    testing,
                    connectionStatus,
                    changeTheme,
                    testConnection,
                    selectPath,
                    saveSettings,
                    exportSettings,
                    importSettings,
                    resetSettings
                }
            }
        }).mount('#app')
    </script>
</body>
</html>
